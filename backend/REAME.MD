# ðŸ“‹ Control de Visitantes - IIGE

Sistema de backend para el control y registro de visitantes en el Instituto de InvestigaciÃ³n GeolÃ³gico y EnergÃ©tico (IIGE), desarrollado con Node.js, Express y PostgreSQL.

---

## ðŸ“‹ Ãndice

- [ðŸš€ Requisitos Previos](#-requisitos-previos)
- [âš™ï¸ InstalaciÃ³n](#ï¸-instalaciÃ³n)
- [ðŸ“ Estructura del Proyecto](#-estructura-del-proyecto)
- [ðŸ› ï¸ TecnologÃ­as Utilizadas](#-tecnologÃ­as-utilizadas)
- [âœ… Endpoints Disponibles](#-endpoints-disponibles)
- [ðŸ§ª Pruebas con Postman](#-pruebas-con-postman)
  - [Para probar el login](#para-probar-el-login)
  - [Para probar el registro de nuevo usuario](#para-probar-el-registro-de-nuevo-usuario)
- [ðŸ’¬ Contribuciones](#-contribuciones)
- [ðŸ†˜ Soporte](#-soporte)
- [ðŸ“Œ Notas](#-notas)

---

## ðŸš€ Requisitos Previos

Antes de comenzar, asegÃºrate de tener instalado:

- [Node.js](https://nodejs.org/) (recomendado: v16 o superior)
- [npm](https://www.npmjs.com/)
- [Git](https://git-scm.com/)
- [PostgreSQL](https://www.postgresql.org/)

---

## âš™ï¸ InstalaciÃ³n

### 1. Clonar el repositorio

```bash
git clone https://github.com/tu-usuario/Control-Visitantes-IIGE.git
cd Control-Visitantes-IIGE/backend
```

### 2. Instalar dependencias

```bash
npm install
```

> Si lo prefieres, puedes instalar las dependencias principales manualmente:

```bash
npm install express sequelize pg pg-hstore body-parser cors dotenv
```

### 3. Configurar variables de entorno

Crea un archivo `.env` en la carpeta `backend/` con el siguiente contenido ajustado a tu configuraciÃ³n local:

```env
DB_HOST=localhost
DB_USER=tu_usuario
DB_PASSWORD=tu_contraseÃ±a
DB_NAME=control_visitantes
DB_PORT=5432
PORT=3000
```

> AsegÃºrate de que la base de datos estÃ© creada en PostgreSQL y las credenciales coincidan.

### 4. Ejecutar el proyecto

```bash
npm run dev
```

Esto iniciarÃ¡ el servidor en modo desarrollo usando `nodemon`. Por defecto, estarÃ¡ disponible en:

```
http://localhost:3000
```

---

## ðŸ“ Estructura del Proyecto

```
backend/
â”œâ”€â”€ config/            # ConfiguraciÃ³n de la base de datos (Sequelize)
â”œâ”€â”€ controllers/       # Controladores de las rutas
â”œâ”€â”€ models/            # Modelos Sequelize y relaciones
â”œâ”€â”€ routes/            # DefiniciÃ³n de rutas API
â”œâ”€â”€ .env               # Variables de entorno
â”œâ”€â”€ app.js             # ConfiguraciÃ³n principal de la app
â”œâ”€â”€ package.json       # Dependencias y scripts
â””â”€â”€ README.md          # DocumentaciÃ³n
```

---

## ðŸ› ï¸ TecnologÃ­as Utilizadas

- **Node.js** â€“ Entorno de ejecuciÃ³n para JavaScript
- **Express** â€“ Framework para construir APIs REST
- **Sequelize** â€“ ORM para PostgreSQL
- **PostgreSQL** â€“ Sistema de base de datos relacional
- **dotenv** â€“ GestiÃ³n de variables de entorno
- **CORS** â€“ Middleware para habilitar peticiones externas
- **body-parser** â€“ Middleware para analizar cuerpos de peticiones

---

## âœ… Endpoints Disponibles

| MÃ©todo | Endpoint                | DescripciÃ³n                             |
| ------ | ----------------------- | --------------------------------------- |
| POST   | `/api/usuarios/login`   | Iniciar sesiÃ³n con usuario y contraseÃ±a |
| POST   | `/api/usuarios/agregar` | Registrar nuevo usuario                 |

> MÃ¡s rutas serÃ¡n aÃ±adidas conforme se avance el desarrollo del proyecto.

---

## ðŸ§ª Pruebas con Postman

### Para probar el login

1. Abre Postman.
2. Selecciona el mÃ©todo `POST`.
3. URL: `http://localhost:3000/api/usuarios/login`
4. En el **body**, selecciona `raw` y formato `JSON`:

```json
{
  "usuario": "djsegovia",
  "contrasena": "1234"
}
```

---

### Para probar el registro de nuevo usuario

1. Abre Postman.
2. Selecciona el mÃ©todo `POST`.
3. URL: `http://localhost:3000/api/usuarios/agregar`
4. En el **body**, selecciona `raw` y formato `JSON`:

```json
{
  "nombre_completo": "Jose Muzo",
  "usuario": "muzoo",
  "contrasena": "1234",
  "rol_id": "1"
}
```

---

## ðŸ’¬ Contribuciones

- Usa `issues` para reportar errores o sugerencias.

---

## ðŸ†˜ Soporte

Si tienes preguntas o problemas con la instalaciÃ³n, por favor abre un [issue en GitHub](https://github.com/users/jordandd56/projects/1).

---

## ðŸ“Œ Notas

- La documentaciÃ³n se actualizarÃ¡ conforme se agreguen nuevas funcionalidades.
